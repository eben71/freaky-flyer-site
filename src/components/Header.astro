---
const navItems = [
  { href: '/', label: 'Home' },
  { href: '/services', label: 'Services' },
  { href: '/pricing', label: 'Pricing' },
  { href: '/areas', label: 'Areas' },
  { href: '/about', label: 'About' },
  { href: '/contact', label: 'Contact' },
];
---
<header class="site-header" role="banner">
  <div class="container header__inner">
    <a class="site-logo" href="/" aria-label="Freaky Flyer Delivery home">FFD</a>
    <button
      class="nav-toggle"
      type="button"
      aria-expanded="false"
      aria-controls="primary-navigation"
      data-nav-toggle
    >
      Menu
    </button>
    <nav
      id="primary-navigation"
      class="primary-nav"
      aria-label="Main navigation"
      data-nav
      data-collapsed
    >
      <ul class="primary-nav__list" data-nav-list>
        {navItems.map((item) => (
          <li class="primary-nav__item">
            <a class="primary-nav__link" href={item.href}>{item.label}</a>
          </li>
        ))}
      </ul>
    </nav>
  </div>
</header>
<script is:inline>
  const toggle = document.querySelector('[data-nav-toggle]');
  const nav = document.querySelector('[data-nav]');
  if (toggle && nav) {
    const mq = window.matchMedia('(min-width: 768px)');
    const syncMenu = () => {
      if (mq.matches) {
        nav.removeAttribute('data-open');
        nav.removeAttribute('data-collapsed');
        toggle.setAttribute('aria-expanded', 'false');
      } else {
        nav.removeAttribute('data-open');
        nav.setAttribute('data-collapsed', '');
        toggle.setAttribute('aria-expanded', 'false');
      }
    };
    syncMenu();
    if (typeof mq.addEventListener === 'function') {
      mq.addEventListener('change', syncMenu);
    } else if (typeof mq.addListener === 'function') {
      mq.addListener(syncMenu);
    }
    toggle.addEventListener('click', () => {
      if (mq.matches) return;
      const expanded = toggle.getAttribute('aria-expanded') === 'true';
      toggle.setAttribute('aria-expanded', String(!expanded));
      if (expanded) {
        nav.removeAttribute('data-open');
        nav.setAttribute('data-collapsed', '');
      } else {
        nav.setAttribute('data-open', '');
        nav.removeAttribute('data-collapsed');
      }
    });
  }
</script>
