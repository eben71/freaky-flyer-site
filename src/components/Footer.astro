---
import { linkAttrs } from "../lib/links";
import { site } from "../site.config";

const telHref = `tel:${site.phone.replace(/[^\d+]/g, "")}`;
const emailHref = `mailto:${site.email}`;
const telAttrs = linkAttrs(telHref);
const emailAttrs = linkAttrs(emailHref);
const socialLinks = [
  { href: "https://x.com/flyerfreaky", label: "X (formerly Twitter)" },
  { href: "https://www.facebook.com/FreakyFlyerDelivery", label: "Facebook" },
  { href: "https://www.instagram.com/freakyflyerdelivery", label: "Instagram" },
];
---
<footer class="site" role="contentinfo">
  <div class="container section">
    <div class="cols">
      <div class="footer-card">
        <h2>Contact Information</h2>
        <ul class="footer-list">
          <li>
            <strong>Phone:</strong>
            <a href={telHref} {...telAttrs}>{site.phone}</a>
          </li>
          <li>
            <strong>Email:</strong>
            <a href={emailHref} {...emailAttrs}>{site.email}</a>
          </li>
          <li>
            <strong>Warehouse Address:</strong>
            <span>{site.address}</span>
          </li>
          <li>
            <strong>Warehouse Hours:</strong>
            <span>{site.hours}</span>
          </li>
        </ul>
      </div>
      <div class="footer-card footer-map">
        <h2>Warehouse Drop Off</h2>
        <iframe
          src="https://www.google.com/maps/embed?pb=!1m14!1m8!1m3!1d13568.156045966232!2d115.8273151!3d-31.7694219!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0%3A0x836db8d126077448!2sFreaky+Flyer+Delivery+Pty+Ltd!5e0!3m2!1sen!2sau!4v1543755188278"
          width="300"
          height="170"
          style="border:0"
          allowfullscreen
          loading="lazy"
          referrerpolicy="no-referrer-when-downgrade"
        ></iframe>
      </div>
      <div class="footer-card footer-card--social">
        <h2>Follow Us</h2>
        <div class="footer-social" role="list">
          {socialLinks.map((item) => {
            const attrs = linkAttrs(item.href);
            return (
              <a class="social-link" role="listitem" href={item.href} {...attrs}>
                <span class="sr-only">{item.label}</span>
                <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false">
                  {item.label.startsWith("X") && (
                    <path d="M3 3h4.9l4 5.4L16.2 3H21l-7.2 8.7L21 21h-4.9l-4.3-5.8L7.8 21H3l7.5-9.3L3 3z" />
                  )}
                  {item.label === "Facebook" && (
                    <path d="M13.6 21v-7h2.4l.4-2.8h-2.8v-1.8c0-.8.2-1.4 1.5-1.4H16V5.6c-.3 0-1.1-.1-2-.1-2 0-3.3 1.2-3.3 3.4v2H8.6V14h2.1v7h2.9z" />
                  )}
                  {item.label === "Instagram" && (
                    <path d="M8 3.5h8c2.5 0 4.5 2 4.5 4.5v8c0 2.5-2 4.5-4.5 4.5H8c-2.5 0-4.5-2-4.5-4.5v-8C3.5 5.5 5.5 3.5 8 3.5zm0 1.5C6.1 5 4.5 6.6 4.5 8.5v7c0 1.9 1.6 3.5 3.5 3.5h7c1.9 0 3.5-1.6 3.5-3.5v-7C18.5 6.6 16.9 5 15 5H8zm8.4 1.8a1 1 0 1 1 0 2.1 1 1 0 0 1 0-2.1zM12 8a4 4 0 1 1 0 8 4 4 0 0 1 0-8zm0 1.8A2.2 2.2 0 1 0 12 16a2.2 2.2 0 0 0 0-4.4z" />
                  )}
                </svg>
              </a>
            );
          })}
        </div>
      </div>
    </div>
    <div class="legal">
      <p>Â© {new Date().getFullYear()} Freaky Flyer Delivery | ABN: 34 606 384 570</p>
    </div>
  </div>
</footer>

<style is:global>
footer.site h2{font-size:1rem;margin-bottom:var(--space-2);color:#fff;letter-spacing:.08em;text-transform:uppercase}
footer.site ul{margin:0;padding:0;list-style:none;display:grid;gap:var(--space-2)}
footer.site p{margin:0 0 var(--space-3);color:#f8dcdc}
</style>
