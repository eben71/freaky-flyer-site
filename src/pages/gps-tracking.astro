---
import BaseLayout from '../layouts/BaseLayout.astro';
import { loadPage } from '../lib/content.ts';
import ContentBlock from './_partials/ContentBlock.astro';
import SectionHeader from '../components/SectionHeader.astro';

const slug = 'gps-tracking';
const page = await loadPage(slug);
const fallbackTitle = 'GPS Tracking | Freaky Flyer Delivery';
const fallbackDescription =
  'Full GPS tracking and audit trails for every Freaky Flyer Delivery run across Perth.';
const frontmatter = page?.fm ?? {};
const rawTitle = typeof frontmatter.title === 'string' ? frontmatter.title : '';
const rawDescription =
  typeof frontmatter.description === 'string' ? frontmatter.description : '';
const title = rawTitle.trim().length > 0 ? rawTitle : fallbackTitle;
const description =
  rawDescription.trim().length > 0 ? rawDescription : fallbackDescription;
const headingTitle = page?.fm?.title ?? 'GPS Tracking';
---

<BaseLayout {title} description={description}>
  {
    page ? (
      <>
        <section class="section surface">
          <div class="container">
            <SectionHeader
              level={1}
              title={headingTitle}
              description={description}
            />
          </div>
        </section>
        <ContentBlock html={page.html} />
      </>
    ) : (
      <section class="section surface">
        <div class="container">
          <SectionHeader
            level={1}
            title={headingTitle}
            description={description}
          />
          <p>
            Discover how live rider tracking, audit trails, and delivery
            heatmaps provide proof of performance for every suburb drop.
          </p>
        </div>
      </section>
    )
  }
</BaseLayout>
