---
import BaseLayout from "../layouts/BaseLayout.astro";
import { loadPage } from "../lib/content.ts";
import Hero from "../components/Hero.astro";
import ContentBlock from "./_partials/ContentBlock.astro";

const slug = 'index';
const page = await loadPage(slug);
const fallbackTitle = "Freaky Flyer Delivery";
const fallbackDescription = "GPS-verified flyer delivery in Perth.";
const frontmatter = page?.fm ?? {};
const rawTitle = typeof frontmatter.title === 'string' ? frontmatter.title : '';
const rawDescription = typeof frontmatter.description === 'string' ? frontmatter.description : '';
const title = rawTitle.trim().length > 0 ? rawTitle : fallbackTitle;
const description = rawDescription.trim().length > 0 ? rawDescription : fallbackDescription;
---
<BaseLayout {title} description={description}>
  {page ? (
    <ContentBlock html={page.html} />
  ) : (
    <>
      <Hero
        kicker="GPS-verified drops"
        title="GPS-verified flyer delivery in Perth"
        text="Keep your promotions on track with accountable street teams and suburb-level reporting."
        primaryHref="/contact"
        primaryText="Get a Quote"
        secondaryHref="/services"
        secondaryText="Explore Services"
      />

      <section aria-labelledby="value-heading" class="section surface">
        <div class="container">
          <h2 id="value-heading">Transparency, accountability, and better drops</h2>
          <div class="grid cols-3">
            <article class="card">
              <h3>Route planning support</h3>
              <p>Suburb selection tailored for WA businesses, backed by local delivery experience.</p>
            </article>
            <article class="card">
              <h3>GPS-tracked walkers</h3>
              <p>Every delivery comes with timestamped breadcrumb trails for proof of performance.</p>
            </article>
            <article class="card">
              <h3>Accountable reporting</h3>
              <p>Receive suburb summaries so stakeholders can review campaign impact at a glance.</p>
            </article>
          </div>
        </div>
      </section>

      <section aria-labelledby="promise-heading" class="section">
        <div class="container">
          <div class="card">
            <h2 id="promise-heading">What you can expect</h2>
            <p>
              Consistent walkers, timely drops, and transparent GPS logs so you can prove every flyer made it to the letterbox.
            </p>
          </div>
        </div>
      </section>
    </>
  )}
</BaseLayout>
