---
import BaseLayout from '../layouts/BaseLayout.astro';
import { loadPage } from '../lib/content.ts';
import ContentBlock from './_partials/ContentBlock.astro';

const slug = 'pricing';
const page = await loadPage(slug);
const fallbackTitle = 'Pricing | Freaky Flyer Delivery';
const fallbackDescription = '';
const frontmatter = page?.fm ?? {};
const rawTitle = typeof frontmatter.title === 'string' ? frontmatter.title : '';
const rawDescription = typeof frontmatter.description === 'string' ? frontmatter.description : '';
const title = rawTitle.trim().length > 0 ? rawTitle : fallbackTitle;
const description = rawDescription.trim().length > 0 ? rawDescription : fallbackDescription;
---
<BaseLayout {title} description={description}>
  <section class="section surface">
    <div class="container">
      <h2>Pricing & Packages</h2>
      {!page && (
        <p>
          Choose a pricing option that suits your campaign scale, with transparent rates per thousand drops and bundled reporting
          to keep stakeholders informed.
        </p>
      )}
    </div>
  </section>

  {page ? (
    <ContentBlock html={page.html} />
  ) : (
    <section class="section" aria-labelledby="pricing-download">
      <div class="container">
        <div class="card">
          <div class="badge">Updated quarterly</div>
          <h3 id="pricing-download" style="text-transform:uppercase;letter-spacing:.05em">Download latest pricing</h3>
          <p>Grab the newest rate card in your preferred format to share with your team.</p>
          <div role="group" aria-label="Pricing downloads" style="display:flex;gap:12px;flex-wrap:wrap">
            <a class="button primary" href="/downloads/freaky-flyer-pricing.csv">Download CSV</a>
            <a class="button outline" href="/downloads/freaky-flyer-pricing.pdf">Download PDF</a>
          </div>
        </div>
      </div>
    </section>
  )}
</BaseLayout>
