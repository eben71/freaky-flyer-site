---
import BaseLayout from '../layouts/BaseLayout.astro';

const suburbs = [
  'Armadale',
  'Balcatta',
  'Bassendean',
  'Belmont',
  'Canning Vale',
  'Claremont',
  'Cottesloe',
  'Fremantle',
  'Joondalup',
  'Leederville',
  'Midland',
  'Morley',
  'Osborne Park',
  'Rockingham',
  'Scarborough',
  'South Perth',
  'Subiaco',
  'Victoria Park',
  'Wanneroo',
  'Willetton'
];

const breadcrumbs = [
  { href: '/', label: 'Home' },
  { href: '/areas', label: 'Areas' }
];
---
<BaseLayout
  title="Areas | Freaky Flyer Delivery"
  description="Perth metro suburbs covered by Freaky Flyer Delivery with GPS-backed proof of distribution."
  breadcrumbs={breadcrumbs}
  pageType="article"
>
  <section class="section" aria-labelledby="areas-heading">
    <div class="container">
      <h1 id="areas-heading">Areas we cover</h1>
      <p class="lead">
        Our walkers live across Perth, allowing us to service CBD, inner metro and growth corridors with minimal travel time. Use
        the suburb search to confirm coverage or request rural add-ons.
      </p>
      <div class="grid two" style="align-items:start;">
        <div>
          <label for="suburb-search">Search suburbs</label>
          <input id="suburb-search" type="search" placeholder="Start typing a suburb" aria-describedby="suburb-help" />
          <p id="suburb-help" class="small">List updates as you type â€“ this is a placeholder dataset.</p>
          <ul id="suburb-list" style="margin-top:1rem; padding-left:1rem;">
            {suburbs.map((suburb) => (
              <li>{suburb}</li>
            ))}
          </ul>
        </div>
        <figure>
          <img
            src="/assets/img/map-placeholder.svg"
            alt="Coverage map placeholder"
            width="800"
            height="480"
            loading="lazy"
          />
          <figcaption class="small">Drag your own GeoJSON or GPX files into our GPS tracking page for a live view.</figcaption>
        </figure>
      </div>
    </div>
  </section>

  <script type="module">
    const input = document.querySelector('#suburb-search');
    const list = document.querySelector('#suburb-list');
    const allItems = Array.from(list?.querySelectorAll('li') ?? []);

    const filter = () => {
      const query = (input?.value || '').toLowerCase();
      allItems.forEach((item) => {
        const matches = item.textContent?.toLowerCase().includes(query);
        item.style.display = matches ? '' : 'none';
      });
    };

    input?.addEventListener('input', filter);
  </script>
</BaseLayout>
