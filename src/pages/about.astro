---
import BaseLayout from "../layouts/BaseLayout.astro";
import { loadPage } from "../lib/content.ts";
import ContentBlock from "./_partials/ContentBlock.astro";
import SectionHeader from "../components/SectionHeader.astro";

const slug = "about";
const page = await loadPage(slug);
const fallbackTitle = "About";
const fallbackDescription = "Meet the Freaky Flyer Delivery crew and learn how we built Perth’s most accountable flyer runs.";
const frontmatter = page?.fm ?? {};
const rawTitle = typeof frontmatter.title === "string" ? frontmatter.title : "";
const rawDescription = typeof frontmatter.description === "string" ? frontmatter.description : "";
const title = rawTitle.trim().length > 0 ? rawTitle : fallbackTitle;
const description = rawDescription.trim().length > 0 ? rawDescription : fallbackDescription;
---
<BaseLayout {title} description={description}>
  {page ? (
    <>
      <section class="section surface">
        <div class="container">
          <SectionHeader title={page.fm?.title ?? "About Freaky Flyer Delivery"} />
        </div>
      </section>
      <ContentBlock html={page.html} />
    </>
  ) : (
    <>
      <section class="section surface">
        <div class="container">
          <SectionHeader title="About Freaky Flyer Delivery" />
          <p>
            Learn how our experienced distribution team blends on-the-ground knowledge with GPS tools to keep local campaigns
            accountable and effective.
          </p>
        </div>
      </section>
      <section class="section">
        <div class="container">
          <div class="card">
            <p>
              Since 2014 we’ve been Perth’s trusted flyer partner—family owned, proudly local, and committed to covering every
              street on the run sheet.
            </p>
          </div>
        </div>
      </section>
    </>
  )}
</BaseLayout>
